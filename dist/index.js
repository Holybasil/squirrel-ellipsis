"use client";
"use strict";var B=Object.create;var T=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var J=(n,r)=>{for(var i in r)T(n,i,{get:r[i],enumerable:!0})},C=(n,r,i,h)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of U(r))!G.call(n,a)&&a!==i&&T(n,a,{get:()=>r[a],enumerable:!(h=F(r,a))||h.enumerable});return n};var K=(n,r,i)=>(i=n!=null?B(D(n)):{},C(r||!n||!n.__esModule?T(i,"default",{value:n,enumerable:!0}):i,n)),Q=n=>C(T({},"__esModule",{value:!0}),n);var Z={};J(Z,{default:()=>Y});module.exports=Q(Z);var e=K(require("react")),H={position:"absolute",bottom:0,left:0,height:0,overflow:"hidden",paddingTop:0,paddingBottom:0,border:"none"},V=["box-sizing","width","font-size","font-weight","font-family","font-style","letter-spacing","text-indent","white-space","word-break","overflow-wrap","padding-left","padding-right"];var X=n=>{let{component:r="div",ellipsis:i=e.default.createElement(e.default.Fragment,null,"\u2009...\u2009"),basedOn:h,maxLine:a,text:c,className:w,action:b="more",trimEndPunc:E=!0,onReflow:$,...M}=n,[S,q]=(0,e.useState)(c),[m,v]=(0,e.useState)(a),[g,O]=(0,e.useState)(!1),x=(0,e.useRef)([]),u=(0,e.useRef)(),f=(0,e.useRef)(),y=(0,e.useRef)(),N=(0,e.useRef)(0),z=(0,e.useMemo)(()=>{let t=(g?S:c).trimEnd();return E&&g&&(t=t.replace(/[.,;:!?，。；：！？]+$/,"")),t},[c,S,E,g]);(0,e.useEffect)(()=>{q(c)},[c]),(0,e.useEffect)(()=>{v(a)},[a]),(0,e.useEffect)(()=>{let t=o=>{f.current&&(P(),j({basedOn:h,text:c,maxLine:m}))},s=new ResizeObserver(t);return s.observe(f.current),()=>{f.current&&s&&s.unobserve(f.current)}},[h,c,m]);let P=()=>{let t=window.getComputedStyle(f.current);V.forEach(s=>{u.current.style[s]=t[s]})},j=t=>{let s=t.basedOn||(/^[\x00-\x7F]+$/.test(t.text)?"words":"letters");s==="words"?x.current=t.text.split(/\b|(?=\W)/):s==="letters"?x.current=Array.from(t.text):x.current=t.text.split(/\b|(?=\W)/),u.current.innerHTML=x.current.map(d=>`<span class='squirrel-ellipsis-unit'>${d}</span>`).join("");let o=k(I()),p=o>-1,l=p?x.current.slice(0,o).join(""):t.text;O(p),q(l),f.current.offsetHeight<=N.current&&$(p,l)},I=()=>{let t=[0],s=u.current.firstElementChild;if(!s)return t;let o=0,p=1,l=s.offsetTop;for(;(s=s.nextElementSibling)&&(o++,s.offsetTop>l&&(p++,t.push(o),l=s.offsetTop),!(p>m)););return t},k=t=>{if(!m||t.length<=m)return-1;let s=t[m],o=x.current.slice(0,s),p=u.current.children[s].offsetTop;N.current=p,u.current.innerHTML=o.map((A,_)=>`<span class='squirrel-ellipsis-unit'>${A}</span>`).join("")+`<span class='squirrel-ellipsis-tail'>${y.current.innerHTML}</span>`;let l=u.current.lastElementChild,d=l.previousElementSibling;for(;d&&(l.offsetTop>=p||l.offsetTop>d.offsetTop||l.offsetHeight>d.offsetHeight);)u.current.removeChild(d),d=l.previousElementSibling,o.pop();return o.length},W=()=>{v(null)};return e.default.createElement(e.default.Fragment,null,e.default.createElement(r,{className:`squirrel-ellipsis ${g?"squirrel-ellipsis-clamped":""} ${w||""}`,ref:f,...M},z,g&&e.default.createElement("span",{className:"squirrel-ellipsis-tail"},e.default.createElement("span",{className:"squirrel-ellipsis-suffix"},i),b&&e.default.createElement("span",{className:"squirrel-ellipsis-action",style:{cursor:"pointer"},role:"button",onClick:W},b))),e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:H,ref:u,"aria-hidden":"true",className:`squirrel-ellipsis-shadow ${w}`}),e.default.createElement("span",{style:H,ref:y},e.default.createElement("span",{className:"squirrel-ellipsis-suffix"},i),b&&e.default.createElement("span",{className:"squirrel-ellipsis-action"},b))))},L=X;var Y=L;
//# sourceMappingURL=index.js.map